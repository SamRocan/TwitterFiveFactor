{% extends 'Main/base.html' %}
{% load static %}
{% block extraCSS %}
<link rel="stylesheet" href="{% static 'analysis_style.css' %}">
{% endblock %}
{% block content %}
<div id="image-container">
    <img src="{{userImage}}" alt="no picture" width="120px" height="120px" id="profilepic">
</div>
<h1 style="text-align: center">@{{founderName}}</h1>
<div id="chartContainer">
    <canvas id="myChartBar"></canvas>
</div>
<div style="text-align: center; margin-bottom: 30px">
    <p>{{ext}}: {{extScore}}</p>
    <p>{{neu}}: {{neuScore}}</p>
    <p>{{agr}}: {{agrScore}}</p>
    <p>{{con}}: {{conScore}}</p>
    <p>{{opn}}: {{opnScore}}</p>
    <!-- Sharingbutton Twitter -->
    <a href="{% url 'index' %}" class="btn" style="border-radius: 10px; background-color: #436981; color: white;">Try someone else?</a>
    <br>
    <br>
    <button onclick="window.print()" class="btn" style="border-radius: 10px; background-color: #00a476; color: white;">Save as PDF</button>
    <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Check%20out%20my%20five%20factor%20score%20for%20@{{founderName}}.&amp;url=http%3A%2F%2Ftwitter-to-five-factor.herokuapp.com{{ request.get_full_path }}" target="_blank" rel="noopener" aria-label="">
        <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid" style="">
            Share on Twitter <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg>
        </div>
        </div>
    </a>
</div>
{% endblock %}
{% block extraJS %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

<script>
    var endpoint = '/fivefactor/graph/'
    $.ajax({
        method: "GET",
        url: endpoint,
        success: function(data) {
            drawBarGraph(data, 'myChartBar');
        },
        error: function(error_data) {

            console.log(error_data);
        }
    })
    function drawBarGraph(data, id) {
        var labels = data.fiveFactors;
        var chartLabel = data.userName;
        var chartData = data.scores;
        var ctx = document.getElementById(id).getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: chartLabel,
                    data: chartData,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)',
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                maintainAspectRatio: false,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    }
</script>
{% endblock %}
</html>
